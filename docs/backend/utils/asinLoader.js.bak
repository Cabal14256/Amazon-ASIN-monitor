// utils/asinLoader.js
const db = require('./db');

/**
 * 从数据库中获取所有 ASIN（建议只取非空的有效 ASIN）
 */
async function loadAsins() {
  try {
    const [rows] = await db.query('SELECT asin FROM asins WHERE asin IS NOT NULL');
    return rows.map(row => row.asin);
  } catch (error) {
    console.error('获取数据库 ASIN 列表失败:', error);
    return [];
  }
}

module.exports = loadAsins;
