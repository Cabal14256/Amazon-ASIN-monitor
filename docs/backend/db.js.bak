// ? 加载 .env 环境变量（确保你有一个 .env 文件）
require('dotenv').config();

// ? 引入 mysql2 的 Promise 版本，用于异步/await 操作
const mysql = require('mysql2/promise');

// ? 创建 MySQL 连接池，提高性能并自动管理连接
const pool = mysql.createPool({
  host: process.env.DB_HOST,         // 数据库主机地址，例如：localhost 或 127.0.0.1
  user: process.env.DB_USER,         // 数据库用户名，例如：root
  password: process.env.DB_PASSWORD, // 数据库密码
  database: process.env.DB_NAME,     // 要连接的数据库名称，如 asin_monitor
  waitForConnections: true,          // 当连接池满时是否等待（true = 等待；false = 报错）
  connectionLimit: 10,               // 最大并发连接数
  queueLimit: 0                      // 连接请求队列最大长度（0 表示无限制）
});

// ? 导出连接池对象，供其他模块使用
module.exports = pool;
